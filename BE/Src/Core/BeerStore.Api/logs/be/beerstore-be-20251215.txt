[2025-12-15 02:27:27.082 +07:00] [INF] [d58d6a33da5170b82e041aaa9c61fc49] [Diagnostics] [Request starting HTTP/1.1 PUT https://localhost:7124/api/User/42c5d984-edcd-48ca-8454-fc85ba8a4647 - application/json 202]
[2025-12-15 02:27:27.582 +07:00] [INF] [d58d6a33da5170b82e041aaa9c61fc49] [Diagnostics] [Request finished HTTP/1.1 PUT https://localhost:7124/api/User/42c5d984-edcd-48ca-8454-fc85ba8a4647 - 401 0 null 516.0236ms]
[2025-12-15 02:27:47.619 +07:00] [INF] [080804e2042005bac2cc64685af3c0a8] [Diagnostics] [Request starting HTTP/1.1 POST https://localhost:7124/api/auth/login - application/json 66]
[2025-12-15 02:27:52.830 +07:00] [INF] [080804e2042005bac2cc64685af3c0a8] [Diagnostics] [Request finished HTTP/1.1 POST https://localhost:7124/api/auth/login - 200 null application/json; charset=utf-8 5211.7335ms]
[2025-12-15 02:28:12.026 +07:00] [INF] [fa7452e028da33adef7c28c164a9b43a] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User - null null]
[2025-12-15 02:28:12.209 +07:00] [INF] [fa7452e028da33adef7c28c164a9b43a] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User - 200 null application/json; charset=utf-8 182.308ms]
[2025-12-15 02:28:23.744 +07:00] [INF] [4fdaad3fe65f79e4d83f888cdd8afd09] [Diagnostics] [Request starting HTTP/1.1 PUT https://localhost:7124/api/User/42c5d984-edcd-48ca-8454-fc85ba8a4647 - application/json 202]
[2025-12-15 02:28:23.759 +07:00] [INF] [4fdaad3fe65f79e4d83f888cdd8afd09] [Diagnostics] [Request finished HTTP/1.1 PUT https://localhost:7124/api/User/42c5d984-edcd-48ca-8454-fc85ba8a4647 - 401 0 null 14.4358ms]
[2025-12-15 02:28:31.887 +07:00] [INF] [073376a1fe880f224120c1cf50e1924e] [Diagnostics] [Request starting HTTP/1.1 PUT https://localhost:7124/api/User/42c5d984-edcd-48ca-8454-fc85ba8a4647 - application/json 202]
[2025-12-15 02:28:33.127 +07:00] [INF] [073376a1fe880f224120c1cf50e1924e] [Diagnostics] [Request finished HTTP/1.1 PUT https://localhost:7124/api/User/42c5d984-edcd-48ca-8454-fc85ba8a4647 - 200 null application/json; charset=utf-8 1239.1891ms]
[2025-12-15 02:33:46.014 +07:00] [INF] [83911894c996966c76ef5006d57a2c87] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/Role - null null]
[2025-12-15 02:33:46.063 +07:00] [INF] [83911894c996966c76ef5006d57a2c87] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/Role - 200 null application/json; charset=utf-8 48.3542ms]
[2025-12-15 02:33:51.704 +07:00] [INF] [444e8d40021d858b90d14bca874c5f0f] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User - null null]
[2025-12-15 02:33:51.721 +07:00] [INF] [444e8d40021d858b90d14bca874c5f0f] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User - 200 null application/json; charset=utf-8 16.9739ms]
[2025-12-15 02:34:41.324 +07:00] [INF] [71204c126fc9c95392977b4842b43e52] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/Role - null null]
[2025-12-15 02:34:41.354 +07:00] [INF] [71204c126fc9c95392977b4842b43e52] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/Role - 200 null application/json; charset=utf-8 29.0218ms]
[2025-12-15 02:37:38.802 +07:00] [INF] [2200102aaa553b175003008079c4af55] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User - application/json 146]
[2025-12-15 02:37:38.810 +07:00] [INF] [2200102aaa553b175003008079c4af55] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User - 401 0 null 7.817ms]
[2025-12-15 02:38:09.260 +07:00] [INF] [e67be8e8c96dc21a6c11083a58aeb29c] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/Role - null null]
[2025-12-15 02:38:09.307 +07:00] [INF] [e67be8e8c96dc21a6c11083a58aeb29c] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/Role - 200 null application/json; charset=utf-8 47.2049ms]
[2025-12-15 02:38:48.894 +07:00] [INF] [63edd7d4370360416be49a10a39eb242] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User - application/json 146]
[2025-12-15 02:38:48.905 +07:00] [INF] [63edd7d4370360416be49a10a39eb242] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User - 401 0 null 10.1995ms]
[2025-12-15 02:39:07.861 +07:00] [INF] [2b0335e335ab388bb6abcfecd278e62f] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User - application/json 146]
[2025-12-15 02:39:07.889 +07:00] [INF] [2b0335e335ab388bb6abcfecd278e62f] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User - 200 null application/json; charset=utf-8 28.6943ms]
[2025-12-15 17:02:59.255 +07:00] [INF] [3ec1ad6fcc6ae5e5fe3fd275f6fe9ab6] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User - null null]
[2025-12-15 17:02:59.811 +07:00] [INF] [3ec1ad6fcc6ae5e5fe3fd275f6fe9ab6] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User - 401 0 null 583.4288ms]
[2025-12-15 17:03:07.433 +07:00] [INF] [f297f336d1e5610d66bf51425affc0a0] [Diagnostics] [Request starting HTTP/1.1 POST https://localhost:7124/api/auth/login - application/json 66]
[2025-12-15 17:03:12.803 +07:00] [INF] [f297f336d1e5610d66bf51425affc0a0] [Diagnostics] [Request finished HTTP/1.1 POST https://localhost:7124/api/auth/login - 200 null application/json; charset=utf-8 5370.7365ms]
[2025-12-15 17:03:32.598 +07:00] [INF] [6dfbe3bf6c082f5b16e7dcd5e06637c2] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User - null null]
[2025-12-15 17:03:32.779 +07:00] [INF] [6dfbe3bf6c082f5b16e7dcd5e06637c2] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User - 200 null application/json; charset=utf-8 181.2196ms]
[2025-12-15 17:04:51.005 +07:00] [INF] [7dbd79f06afede7bba71341ee9b441ea] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User/email/ - null null]
[2025-12-15 17:04:51.018 +07:00] [INF] [7dbd79f06afede7bba71341ee9b441ea] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User/email/ - 404 0 null 12.7486ms]
[2025-12-15 17:04:51.032 +07:00] [INF] [7dbd79f06afede7bba71341ee9b441ea] [Diagnostics] [Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7124/api/User/email/, Response status code: 404]
[2025-12-15 17:05:07.707 +07:00] [INF] [b33b4ee725460a8db13ae29d7c827740] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User/email/test - null null]
[2025-12-15 17:05:07.848 +07:00] [INF] [b33b4ee725460a8db13ae29d7c827740] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User/email/test - 200 null application/json; charset=utf-8 141.2693ms]
[2025-12-15 17:05:11.139 +07:00] [INF] [420092d6ee5b206bd058c8e481602835] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User/email/test2 - null null]
[2025-12-15 17:05:11.162 +07:00] [INF] [420092d6ee5b206bd058c8e481602835] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User/email/test2 - 200 null application/json; charset=utf-8 22.3855ms]
[2025-12-15 17:06:41.507 +07:00] [INF] [d39c37773cd25bdcca1cffff01f5588a] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User/email/admin - null null]
[2025-12-15 17:06:41.516 +07:00] [INF] [d39c37773cd25bdcca1cffff01f5588a] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User/email/admin - 401 0 null 8.7146ms]
[2025-12-15 17:07:00.613 +07:00] [INF] [b249cd0b16656634f26e1b6cd3a08c3d] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User/email/admin - null null]
[2025-12-15 17:07:00.646 +07:00] [INF] [b249cd0b16656634f26e1b6cd3a08c3d] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User/email/admin - 200 null application/json; charset=utf-8 33.0707ms]
[2025-12-15 17:07:10.785 +07:00] [INF] [bee4f61449535399ec855d13e07cb900] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User - null null]
[2025-12-15 17:07:10.812 +07:00] [INF] [bee4f61449535399ec855d13e07cb900] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User - 200 null application/json; charset=utf-8 27.4817ms]
[2025-12-15 17:07:24.186 +07:00] [INF] [97048464ec26ae14f07c068eee64e12d] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User/email/admin - null null]
[2025-12-15 17:07:24.200 +07:00] [INF] [97048464ec26ae14f07c068eee64e12d] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User/email/admin - 200 null application/json; charset=utf-8 14.3844ms]
[2025-12-15 17:08:11.820 +07:00] [INF] [c2a62731f445fb81b20211ef28290373] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User/username/admin - null null]
[2025-12-15 17:08:11.874 +07:00] [INF] [c2a62731f445fb81b20211ef28290373] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User/username/admin - 200 null application/json; charset=utf-8 54.2685ms]
[2025-12-15 17:08:53.987 +07:00] [INF] [2245d42e719dc7b77b6c283751dd0702] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User/phone/tesst2 - null null]
[2025-12-15 17:08:53.994 +07:00] [INF] [2245d42e719dc7b77b6c283751dd0702] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User/phone/tesst2 - 401 0 null 6.9028ms]
[2025-12-15 17:09:03.826 +07:00] [INF] [529441b66dd433588bb48f27052f937c] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User/phone/tesst2 - null null]
[2025-12-15 17:09:03.834 +07:00] [INF] [529441b66dd433588bb48f27052f937c] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User/phone/tesst2 - 401 0 null 7.9143ms]
[2025-12-15 17:09:16.247 +07:00] [INF] [4732f855a64d20bc538eb878913ca23a] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User/phone/tesst2 - null null]
[2025-12-15 17:09:16.255 +07:00] [INF] [4732f855a64d20bc538eb878913ca23a] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User/phone/tesst2 - 401 0 null 7.1017ms]
[2025-12-15 17:09:34.537 +07:00] [INF] [12ba548eb269950dd180ce885e7312e4] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User/phone/tesst2 - null null]
[2025-12-15 17:09:34.587 +07:00] [INF] [12ba548eb269950dd180ce885e7312e4] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User/phone/tesst2 - 200 null application/json; charset=utf-8 50.5549ms]
[2025-12-15 17:09:55.900 +07:00] [INF] [a36e10bc474535226863201efe0ea2cf] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User/phone/test2 - null null]
[2025-12-15 17:09:55.915 +07:00] [INF] [a36e10bc474535226863201efe0ea2cf] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User/phone/test2 - 200 null application/json; charset=utf-8 15.274ms]
[2025-12-15 17:12:21.781 +07:00] [INF] [02bf105fb27a36b596146773a3a8b603] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User/emailstatus/1 - null null]
[2025-12-15 17:12:21.789 +07:00] [INF] [02bf105fb27a36b596146773a3a8b603] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User/emailstatus/1 - 401 0 null 8.4223ms]
[2025-12-15 17:12:36.485 +07:00] [INF] [a9c00c5993f5805ac02057a2126d6c1d] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User/emailstatus/1 - null null]
[2025-12-15 17:12:36.565 +07:00] [INF] [a9c00c5993f5805ac02057a2126d6c1d] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User/emailstatus/1 - 200 null application/json; charset=utf-8 79.6074ms]
[2025-12-15 17:12:47.551 +07:00] [INF] [b70a89db78e5621c6608a797a59de72c] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User/emailstatus/active - null null]
[2025-12-15 17:12:47.563 +07:00] [INF] [b70a89db78e5621c6608a797a59de72c] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User/emailstatus/active - 200 null application/json; charset=utf-8 12.1203ms]
[2025-12-15 17:13:40.883 +07:00] [INF] [b8af712150d5a84b520945bc39eeee49] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User/userstatus/active - null null]
[2025-12-15 17:13:40.931 +07:00] [INF] [b8af712150d5a84b520945bc39eeee49] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User/userstatus/active - 200 null application/json; charset=utf-8 48.7397ms]
[2025-12-15 17:13:51.236 +07:00] [INF] [5e32310652b8d7a9bc403c7f9bb84920] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User/emailstatus/active - null null]
[2025-12-15 17:13:51.244 +07:00] [INF] [5e32310652b8d7a9bc403c7f9bb84920] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User/emailstatus/active - 401 0 null 8.2474ms]
[2025-12-15 17:14:40.418 +07:00] [INF] [9bf5938b0a9f00f659058e4365166476] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User/emailstatus/active - null null]
[2025-12-15 17:14:40.442 +07:00] [INF] [9bf5938b0a9f00f659058e4365166476] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User/emailstatus/active - 200 null application/json; charset=utf-8 24.5464ms]
[2025-12-15 17:14:49.854 +07:00] [INF] [31e976331bef82a197924d039d6f9372] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User/emailstatus/inctive - null null]
[2025-12-15 17:14:49.909 +07:00] [INF] [31e976331bef82a197924d039d6f9372] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User/emailstatus/inctive - 400 null application/problem+json; charset=utf-8 54.6731ms]
[2025-12-15 17:15:13.162 +07:00] [INF] [ccea919c161e87293faa336e8cc15d39] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User/emailstatus/inactive - null null]
[2025-12-15 17:15:13.186 +07:00] [INF] [ccea919c161e87293faa336e8cc15d39] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User/emailstatus/inactive - 200 null application/json; charset=utf-8 24.3397ms]
[2025-12-15 17:15:58.239 +07:00] [INF] [23d3677c539b366c4f37716248bbc5cb] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User/phonestatus/inactive - null null]
[2025-12-15 17:15:58.300 +07:00] [INF] [23d3677c539b366c4f37716248bbc5cb] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User/phonestatus/inactive - 200 null application/json; charset=utf-8 60.6196ms]
[2025-12-15 17:17:24.304 +07:00] [INF] [629db154504fa993b64e528c83cde02e] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/Role - null null]
[2025-12-15 17:17:24.343 +07:00] [INF] [629db154504fa993b64e528c83cde02e] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/Role - 200 null application/json; charset=utf-8 39.1005ms]
[2025-12-15 17:18:32.710 +07:00] [INF] [b6c382e1ef19e242ffcf6416c414646a] [Diagnostics] [Request starting HTTP/2 GET https://localhost:7124/index.html - null null]
[2025-12-15 17:18:33.068 +07:00] [INF] [b6c382e1ef19e242ffcf6416c414646a] [Diagnostics] [Request finished HTTP/2 GET https://localhost:7124/index.html - 200 null text/html;charset=utf-8 358.1542ms]
[2025-12-15 17:18:33.083 +07:00] [INF] [b072b787019bf8538ac5d24a85c45abb] [Diagnostics] [Request starting HTTP/2 GET https://localhost:7124/swagger-ui.css - null null]
[2025-12-15 17:18:33.083 +07:00] [INF] [58a39211e388a5a71574016d39974966] [Diagnostics] [Request starting HTTP/2 GET https://localhost:7124/swagger-ui-bundle.js - null null]
[2025-12-15 17:18:33.084 +07:00] [INF] [6f7b646bdcd8ce1ff0d9794c808d5608] [Diagnostics] [Request starting HTTP/2 GET https://localhost:7124/swagger-ui-standalone-preset.js - null null]
[2025-12-15 17:18:33.083 +07:00] [INF] [4f29615c253f29b4d0fd3368bff7f580] [Diagnostics] [Request starting HTTP/2 GET https://localhost:7124/index.css - null null]
[2025-12-15 17:18:33.097 +07:00] [INF] [dbd5cf591f54cbf12ce263a3d489e1f6] [Diagnostics] [Request starting HTTP/2 GET https://localhost:7124/index.js - null null]
[2025-12-15 17:18:33.153 +07:00] [INF] [882f39198cd7784a92b222bce08e1ce8] [Diagnostics] [Request starting HTTP/2 GET https://localhost:7124/_vs/browserLink - null null]
[2025-12-15 17:18:33.228 +07:00] [INF] [4f29615c253f29b4d0fd3368bff7f580] [Diagnostics] [Request finished HTTP/2 GET https://localhost:7124/index.css - 200 152 text/css 145.3894ms]
[2025-12-15 17:18:33.235 +07:00] [INF] [dbd5cf591f54cbf12ce263a3d489e1f6] [Diagnostics] [Request finished HTTP/2 GET https://localhost:7124/index.js - 200 null application/javascript;charset=utf-8 138.3821ms]
[2025-12-15 17:18:33.263 +07:00] [INF] [b072b787019bf8538ac5d24a85c45abb] [Diagnostics] [Request finished HTTP/2 GET https://localhost:7124/swagger-ui.css - 200 23647 text/css 179.9884ms]
[2025-12-15 17:18:33.153 +07:00] [INF] [a48405ab7aab5353b67f6b864391351b] [Diagnostics] [Request starting HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - null null]
[2025-12-15 17:18:33.198 +07:00] [INF] [83baffd2f9e07a4687dadf91d0b1558c] [Diagnostics] [Request starting HTTP/2 GET https://localhost:7124/favicon-32x32.png - null null]
[2025-12-15 17:18:33.267 +07:00] [INF] [6f7b646bdcd8ce1ff0d9794c808d5608] [Diagnostics] [Request finished HTTP/2 GET https://localhost:7124/swagger-ui-standalone-preset.js - 200 77352 text/javascript 183.5431ms]
[2025-12-15 17:18:33.287 +07:00] [INF] [58a39211e388a5a71574016d39974966] [Diagnostics] [Request finished HTTP/2 GET https://localhost:7124/swagger-ui-bundle.js - 200 424765 text/javascript 203.9944ms]
[2025-12-15 17:18:33.322 +07:00] [INF] [a48405ab7aab5353b67f6b864391351b] [Diagnostics] [Request finished HTTP/2 GET https://localhost:7124/_framework/aspnetcore-browser-refresh.js - 200 16511 application/javascript; charset=utf-8 172.2189ms]
[2025-12-15 17:18:33.323 +07:00] [INF] [83baffd2f9e07a4687dadf91d0b1558c] [Diagnostics] [Request finished HTTP/2 GET https://localhost:7124/favicon-32x32.png - 200 628 image/png 125.403ms]
[2025-12-15 17:18:33.384 +07:00] [INF] [882f39198cd7784a92b222bce08e1ce8] [Diagnostics] [Request finished HTTP/2 GET https://localhost:7124/_vs/browserLink - 200 null text/javascript; charset=UTF-8 231.25ms]
[2025-12-15 17:18:33.693 +07:00] [INF] [c6fcb7b7d901f2f0e5a7aad6ba420a19] [Diagnostics] [Request starting HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - null null]
[2025-12-15 17:18:33.748 +07:00] [INF] [c6fcb7b7d901f2f0e5a7aad6ba420a19] [Diagnostics] [Request finished HTTP/2 GET https://localhost:7124/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 55.42ms]
[2025-12-15 17:18:33.748 +07:00] [INF] [ebe7822b9986656b0dd5da087de4b245] [Diagnostics] [Request starting HTTP/2 GET https://localhost:7124/favicon-32x32.png - null null]
[2025-12-15 17:18:33.764 +07:00] [INF] [ebe7822b9986656b0dd5da087de4b245] [Diagnostics] [Request finished HTTP/2 GET https://localhost:7124/favicon-32x32.png - 200 628 image/png 15.8971ms]
[2025-12-15 17:18:50.082 +07:00] [INF] [287509d26207906a35d7f36a0b0a1a1a] [Diagnostics] [Request starting HTTP/1.1 POST https://localhost:7124/api/Role - application/json 54]
[2025-12-15 17:18:50.621 +07:00] [INF] [287509d26207906a35d7f36a0b0a1a1a] [Diagnostics] [Request finished HTTP/1.1 POST https://localhost:7124/api/Role - 200 null application/json; charset=utf-8 538.4633ms]
[2025-12-15 17:18:57.889 +07:00] [INF] [ab86ef6a8b47bc6424fd32117c766b7f] [Diagnostics] [Request starting HTTP/1.1 POST https://localhost:7124/api/Role - application/json 54]
[2025-12-15 17:18:57.910 +07:00] [INF] [ab86ef6a8b47bc6424fd32117c766b7f] [Diagnostics] [Request finished HTTP/1.1 POST https://localhost:7124/api/Role - 200 null application/json; charset=utf-8 20.5613ms]
[2025-12-15 17:19:13.691 +07:00] [INF] [0fdeddf25aa2edc1070c087a2174b9fa] [Diagnostics] [Request starting HTTP/1.1 POST https://localhost:7124/api/Role - application/json 54]
[2025-12-15 17:19:13.743 +07:00] [INF] [0fdeddf25aa2edc1070c087a2174b9fa] [Diagnostics] [Request finished HTTP/1.1 POST https://localhost:7124/api/Role - 200 null application/json; charset=utf-8 51.7775ms]
[2025-12-15 17:19:28.358 +07:00] [INF] [f7487661772f92982c8a34086d1a6638] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/Role - null null]
[2025-12-15 17:19:28.370 +07:00] [INF] [f7487661772f92982c8a34086d1a6638] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/Role - 200 null application/json; charset=utf-8 11.698ms]
[2025-12-15 17:19:46.501 +07:00] [INF] [f4071abbff75254ee5365f5f62f6cc79] [Diagnostics] [Request starting HTTP/1.1 DELETE https://localhost:7124/api/Role/906b3db4-1be8-4dda-84f3-17327b95e849 - null null]
[2025-12-15 17:19:46.599 +07:00] [INF] [f4071abbff75254ee5365f5f62f6cc79] [Diagnostics] [Request finished HTTP/1.1 DELETE https://localhost:7124/api/Role/906b3db4-1be8-4dda-84f3-17327b95e849 - 204 null null 97.9598ms]
[2025-12-15 17:19:50.931 +07:00] [INF] [b8670c7b2f579d5e3c129b7fe563e168] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/Role - null null]
[2025-12-15 17:19:50.941 +07:00] [INF] [b8670c7b2f579d5e3c129b7fe563e168] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/Role - 200 null application/json; charset=utf-8 10.287ms]
[2025-12-15 17:20:04.424 +07:00] [INF] [b490c09077472db5449dca99db2310b2] [Diagnostics] [Request starting HTTP/1.1 POST https://localhost:7124/api/Role - application/json 54]
[2025-12-15 17:20:04.437 +07:00] [WRN] [b490c09077472db5449dca99db2310b2] [CreateRoleCHandler] [Create failed: Role with Name 'test2' already exists]
[2025-12-15 17:20:04.540 +07:00] [WRN] [b490c09077472db5449dca99db2310b2] [CreateRoleCHandler] [BusinessRule Exception occurred while creating Role. Request: {"RoleName":"test2","Description":"test2","$type":"RoleRequest"}]
Domain.Core.RuleException.BusinessRuleException: Exception of type 'Domain.Core.RuleException.BusinessRuleException' was thrown.
   at BeerStore.Application.Modules.Auth.Role.Commands.CreateRole.CreateRoleCHandler.Handle(CreateRoleCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Role\Commands\CreateRole\CreateRoleCHandler.cs:line 35
[2025-12-15 17:20:08.783 +07:00] [WRN] [b490c09077472db5449dca99db2310b2] [ExceptionMiddleware] [Business rule violation ("Conflict")]
Domain.Core.RuleException.BusinessRuleException: Exception of type 'Domain.Core.RuleException.BusinessRuleException' was thrown.
   at BeerStore.Application.Modules.Auth.Role.Commands.CreateRole.CreateRoleCHandler.Handle(CreateRoleCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Role\Commands\CreateRole\CreateRoleCHandler.cs:line 35
   at BeerStore.Application.Modules.Auth.Role.Commands.CreateRole.CreateRoleCHandler.Handle(CreateRoleCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Role\Commands\CreateRole\CreateRoleCHandler.cs:line 54
   at BeerStore.Api.Controllers.Auth.RoleController.Create(RoleRequest request, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Api\Controllers\Auth\RoleController.cs:line 49
   at lambda_method315(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Api.Core.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Code\Project\Beer_Store\BE\Src\Shared\Api.Core\Middleware\ExceptionMiddleware.cs:line 35
[2025-12-15 17:20:08.862 +07:00] [INF] [b490c09077472db5449dca99db2310b2] [Diagnostics] [Request finished HTTP/1.1 POST https://localhost:7124/api/Role - 409 null application/problem+json 4437.6229ms]
[2025-12-15 17:21:26.966 +07:00] [INF] [d9acc8467c1c81e91385ead8121464ac] [Diagnostics] [Request starting HTTP/1.1 PUT https://localhost:7124/api/Role/4eb4620a-8195-486b-b59d-c008fe5dada2 - application/json 54]
[2025-12-15 17:21:27.041 +07:00] [INF] [d9acc8467c1c81e91385ead8121464ac] [Diagnostics] [Request finished HTTP/1.1 PUT https://localhost:7124/api/Role/4eb4620a-8195-486b-b59d-c008fe5dada2 - 200 null application/json; charset=utf-8 75.225ms]
[2025-12-15 17:21:29.262 +07:00] [INF] [a947edf60d7c68a394cb34acd233f6ff] [Diagnostics] [Request starting HTTP/1.1 PUT https://localhost:7124/api/Role/4eb4620a-8195-486b-b59d-c008fe5dada2 - application/json 54]
[2025-12-15 17:21:29.281 +07:00] [INF] [a947edf60d7c68a394cb34acd233f6ff] [Diagnostics] [Request finished HTTP/1.1 PUT https://localhost:7124/api/Role/4eb4620a-8195-486b-b59d-c008fe5dada2 - 200 null application/json; charset=utf-8 18.3034ms]
[2025-12-15 17:21:40.013 +07:00] [INF] [0d13f5fe4d1279ecc80fb1f4fcea6ac3] [Diagnostics] [Request starting HTTP/1.1 PUT https://localhost:7124/api/Role/4eb4620a-8195-486b-b59d-c008fe5dada2 - application/json 54]
[2025-12-15 17:21:40.034 +07:00] [INF] [0d13f5fe4d1279ecc80fb1f4fcea6ac3] [Diagnostics] [Request finished HTTP/1.1 PUT https://localhost:7124/api/Role/4eb4620a-8195-486b-b59d-c008fe5dada2 - 200 null application/json; charset=utf-8 21.3426ms]
[2025-12-15 17:21:46.155 +07:00] [INF] [8b9f0d50958f85736c12638f4e93f2fd] [Diagnostics] [Request starting HTTP/1.1 PUT https://localhost:7124/api/Role/4eb4620a-8195-486b-b59d-c008fe5dada2 - application/json 54]
[2025-12-15 17:21:46.237 +07:00] [ERR] [8b9f0d50958f85736c12638f4e93f2fd] [Update] [An exception occurred in the database while saving changes for context type 'BeerStore.Infrastructure.Persistence.Db.AuthDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Roles' with unique index 'RoleName_Unique'. The duplicate key value is (test1).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:f9fa2a2c-677b-46b1-afce-61c292340df4
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)]
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Roles' with unique index 'RoleName_Unique'. The duplicate key value is (test1).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:f9fa2a2c-677b-46b1-afce-61c292340df4
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2025-12-15 17:21:46.580 +07:00] [ERR] [8b9f0d50958f85736c12638f4e93f2fd] [UpdateRoleCHandler] [Exception occurred while updating Role. Request: {"RoleName":"test1","Description":"test2","$type":"RoleRequest"}]
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Roles' with unique index 'RoleName_Unique'. The duplicate key value is (test1).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:f9fa2a2c-677b-46b1-afce-61c292340df4
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 31
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 40
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 49
   at BeerStore.Application.Modules.Auth.Role.Commands.UpdateRole.UpdateRoleCHandler.Handle(UpdateRoleCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Role\Commands\UpdateRole\UpdateRoleCHandler.cs:line 56
[2025-12-15 17:21:50.669 +07:00] [ERR] [8b9f0d50958f85736c12638f4e93f2fd] [ExceptionMiddleware] [Unhandled exception]
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Roles' with unique index 'RoleName_Unique'. The duplicate key value is (test1).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:f9fa2a2c-677b-46b1-afce-61c292340df4
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 31
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 40
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 49
   at BeerStore.Application.Modules.Auth.Role.Commands.UpdateRole.UpdateRoleCHandler.Handle(UpdateRoleCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Role\Commands\UpdateRole\UpdateRoleCHandler.cs:line 56
   at BeerStore.Application.Modules.Auth.Role.Commands.UpdateRole.UpdateRoleCHandler.Handle(UpdateRoleCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Role\Commands\UpdateRole\UpdateRoleCHandler.cs:line 76
   at BeerStore.Api.Controllers.Auth.RoleController.Update(Guid id, RoleRequest request, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Api\Controllers\Auth\RoleController.cs:line 58
   at lambda_method429(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Api.Core.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Code\Project\Beer_Store\BE\Src\Shared\Api.Core\Middleware\ExceptionMiddleware.cs:line 35
[2025-12-15 17:21:50.704 +07:00] [INF] [8b9f0d50958f85736c12638f4e93f2fd] [Diagnostics] [Request finished HTTP/1.1 PUT https://localhost:7124/api/Role/4eb4620a-8195-486b-b59d-c008fe5dada2 - 500 null application/problem+json 4548.6257ms]
[2025-12-15 17:21:56.169 +07:00] [INF] [95b065af34afe4260a4b5c9553da0062] [Diagnostics] [Request starting HTTP/1.1 PUT https://localhost:7124/api/Role/4eb4620a-8195-486b-b59d-c008fe5dada2 - application/json 54]
[2025-12-15 17:21:56.194 +07:00] [ERR] [95b065af34afe4260a4b5c9553da0062] [Update] [An exception occurred in the database while saving changes for context type 'BeerStore.Infrastructure.Persistence.Db.AuthDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Roles' with unique index 'RoleName_Unique'. The duplicate key value is (test1).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:f9fa2a2c-677b-46b1-afce-61c292340df4
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)]
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Roles' with unique index 'RoleName_Unique'. The duplicate key value is (test1).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:f9fa2a2c-677b-46b1-afce-61c292340df4
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2025-12-15 17:21:56.500 +07:00] [ERR] [95b065af34afe4260a4b5c9553da0062] [UpdateRoleCHandler] [Exception occurred while updating Role. Request: {"RoleName":"test1","Description":"test2","$type":"RoleRequest"}]
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Roles' with unique index 'RoleName_Unique'. The duplicate key value is (test1).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:f9fa2a2c-677b-46b1-afce-61c292340df4
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 31
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 40
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 49
   at BeerStore.Application.Modules.Auth.Role.Commands.UpdateRole.UpdateRoleCHandler.Handle(UpdateRoleCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Role\Commands\UpdateRole\UpdateRoleCHandler.cs:line 56
[2025-12-15 17:22:00.240 +07:00] [ERR] [95b065af34afe4260a4b5c9553da0062] [ExceptionMiddleware] [Unhandled exception]
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Roles' with unique index 'RoleName_Unique'. The duplicate key value is (test1).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:f9fa2a2c-677b-46b1-afce-61c292340df4
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 31
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 40
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 49
   at BeerStore.Application.Modules.Auth.Role.Commands.UpdateRole.UpdateRoleCHandler.Handle(UpdateRoleCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Role\Commands\UpdateRole\UpdateRoleCHandler.cs:line 56
   at BeerStore.Application.Modules.Auth.Role.Commands.UpdateRole.UpdateRoleCHandler.Handle(UpdateRoleCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Role\Commands\UpdateRole\UpdateRoleCHandler.cs:line 76
   at BeerStore.Api.Controllers.Auth.RoleController.Update(Guid id, RoleRequest request, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Api\Controllers\Auth\RoleController.cs:line 58
   at lambda_method429(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Api.Core.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Code\Project\Beer_Store\BE\Src\Shared\Api.Core\Middleware\ExceptionMiddleware.cs:line 35
[2025-12-15 17:22:00.265 +07:00] [INF] [95b065af34afe4260a4b5c9553da0062] [Diagnostics] [Request finished HTTP/1.1 PUT https://localhost:7124/api/Role/4eb4620a-8195-486b-b59d-c008fe5dada2 - 500 null application/problem+json 4095.7417ms]
[2025-12-15 17:25:59.510 +07:00] [INF] [d589e11e7e45770f9bbadb3383f37d37] [Diagnostics] [Request starting HTTP/1.1 PUT https://localhost:7124/api/Role/4eb4620a-8195-486b-b59d-c008fe5dada2 - application/json 54]
[2025-12-15 17:26:03.242 +07:00] [ERR] [d589e11e7e45770f9bbadb3383f37d37] [Update] [An exception occurred in the database while saving changes for context type 'BeerStore.Infrastructure.Persistence.Db.AuthDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Roles' with unique index 'RoleName_Unique'. The duplicate key value is (test1).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:c032f01c-bdff-4695-beff-00d14cc26d22
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)]
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Roles' with unique index 'RoleName_Unique'. The duplicate key value is (test1).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:c032f01c-bdff-4695-beff-00d14cc26d22
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2025-12-15 17:26:03.731 +07:00] [ERR] [d589e11e7e45770f9bbadb3383f37d37] [UpdateRoleCHandler] [Exception occurred while updating Role. Request: {"RoleName":"test1","Description":"test2","$type":"RoleRequest"}]
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Roles' with unique index 'RoleName_Unique'. The duplicate key value is (test1).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:c032f01c-bdff-4695-beff-00d14cc26d22
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 31
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 40
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 49
   at BeerStore.Application.Modules.Auth.Role.Commands.UpdateRole.UpdateRoleCHandler.Handle(UpdateRoleCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Role\Commands\UpdateRole\UpdateRoleCHandler.cs:line 58
[2025-12-15 17:26:08.484 +07:00] [ERR] [d589e11e7e45770f9bbadb3383f37d37] [ExceptionMiddleware] [Unhandled exception]
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Roles' with unique index 'RoleName_Unique'. The duplicate key value is (test1).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:c032f01c-bdff-4695-beff-00d14cc26d22
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 31
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 40
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 49
   at BeerStore.Application.Modules.Auth.Role.Commands.UpdateRole.UpdateRoleCHandler.Handle(UpdateRoleCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Role\Commands\UpdateRole\UpdateRoleCHandler.cs:line 58
   at BeerStore.Application.Modules.Auth.Role.Commands.UpdateRole.UpdateRoleCHandler.Handle(UpdateRoleCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Role\Commands\UpdateRole\UpdateRoleCHandler.cs:line 78
   at BeerStore.Api.Controllers.Auth.RoleController.Update(Guid id, RoleRequest request, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Api\Controllers\Auth\RoleController.cs:line 58
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Api.Core.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Code\Project\Beer_Store\BE\Src\Shared\Api.Core\Middleware\ExceptionMiddleware.cs:line 35
[2025-12-15 17:26:08.567 +07:00] [INF] [d589e11e7e45770f9bbadb3383f37d37] [Diagnostics] [Request finished HTTP/1.1 PUT https://localhost:7124/api/Role/4eb4620a-8195-486b-b59d-c008fe5dada2 - 500 null application/problem+json 9076.12ms]
[2025-12-15 17:28:29.678 +07:00] [INF] [dcb2b39214572c5a94733f0d6f618ff4] [Diagnostics] [Request starting HTTP/1.1 PUT https://localhost:7124/api/Role/4eb4620a-8195-486b-b59d-c008fe5dada2 - application/json 54]
[2025-12-15 17:28:33.454 +07:00] [ERR] [dcb2b39214572c5a94733f0d6f618ff4] [Update] [An exception occurred in the database while saving changes for context type 'BeerStore.Infrastructure.Persistence.Db.AuthDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Roles' with unique index 'RoleName_Unique'. The duplicate key value is (test1).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e944b9a5-a989-4bfc-8e21-48c4168969b4
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)]
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Roles' with unique index 'RoleName_Unique'. The duplicate key value is (test1).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e944b9a5-a989-4bfc-8e21-48c4168969b4
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2025-12-15 17:28:33.997 +07:00] [ERR] [dcb2b39214572c5a94733f0d6f618ff4] [UpdateRoleCHandler] [Exception occurred while updating Role. Request: {"RoleName":"test1","Description":"test2","$type":"RoleRequest"}]
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Roles' with unique index 'RoleName_Unique'. The duplicate key value is (test1).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e944b9a5-a989-4bfc-8e21-48c4168969b4
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 31
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 40
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 49
   at BeerStore.Application.Modules.Auth.Role.Commands.UpdateRole.UpdateRoleCHandler.Handle(UpdateRoleCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Role\Commands\UpdateRole\UpdateRoleCHandler.cs:line 58
[2025-12-15 17:28:37.621 +07:00] [ERR] [dcb2b39214572c5a94733f0d6f618ff4] [ExceptionMiddleware] [Unhandled exception]
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Roles' with unique index 'RoleName_Unique'. The duplicate key value is (test1).
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e944b9a5-a989-4bfc-8e21-48c4168969b4
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 31
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 40
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 49
   at BeerStore.Application.Modules.Auth.Role.Commands.UpdateRole.UpdateRoleCHandler.Handle(UpdateRoleCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Role\Commands\UpdateRole\UpdateRoleCHandler.cs:line 58
   at BeerStore.Application.Modules.Auth.Role.Commands.UpdateRole.UpdateRoleCHandler.Handle(UpdateRoleCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Role\Commands\UpdateRole\UpdateRoleCHandler.cs:line 78
   at BeerStore.Api.Controllers.Auth.RoleController.Update(Guid id, RoleRequest request, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Api\Controllers\Auth\RoleController.cs:line 58
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Api.Core.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Code\Project\Beer_Store\BE\Src\Shared\Api.Core\Middleware\ExceptionMiddleware.cs:line 35
[2025-12-15 17:28:37.695 +07:00] [INF] [dcb2b39214572c5a94733f0d6f618ff4] [Diagnostics] [Request finished HTTP/1.1 PUT https://localhost:7124/api/Role/4eb4620a-8195-486b-b59d-c008fe5dada2 - 500 null application/problem+json 8033.7313ms]
[2025-12-15 19:19:53.952 +07:00] [INF] [39aeca48fb2efe82ddb260c0ae1f554c] [Diagnostics] [Request starting HTTP/1.1 PUT https://localhost:7124/api/Role/4eb4620a-8195-486b-b59d-c008fe5dada2 - application/json 54]
[2025-12-15 19:19:54.446 +07:00] [INF] [39aeca48fb2efe82ddb260c0ae1f554c] [Diagnostics] [Request finished HTTP/1.1 PUT https://localhost:7124/api/Role/4eb4620a-8195-486b-b59d-c008fe5dada2 - 401 0 null 517.3215ms]
[2025-12-15 19:20:01.058 +07:00] [INF] [5812715a849ac42de036070ae9e3fcc5] [Diagnostics] [Request starting HTTP/1.1 POST https://localhost:7124/api/auth/login - application/json 66]
[2025-12-15 19:20:06.047 +07:00] [INF] [5812715a849ac42de036070ae9e3fcc5] [Diagnostics] [Request finished HTTP/1.1 POST https://localhost:7124/api/auth/login - 200 null application/json; charset=utf-8 4989.1019ms]
[2025-12-15 19:20:22.229 +07:00] [INF] [ba0d12f3628ff69476b449a57adf5aac] [Diagnostics] [Request starting HTTP/1.1 PUT https://localhost:7124/api/Role/4eb4620a-8195-486b-b59d-c008fe5dada2 - application/json 54]
[2025-12-15 19:20:22.481 +07:00] [WRN] [ba0d12f3628ff69476b449a57adf5aac] [UpdateRoleCHandler] [Update failed: Role with Name 'test1' already exists]
[2025-12-15 19:20:22.590 +07:00] [WRN] [ba0d12f3628ff69476b449a57adf5aac] [UpdateRoleCHandler] [BusinessRule Exception occurred while updating Role. Request: {"RoleName":"test1","Description":"test2","$type":"RoleRequest"}]
Domain.Core.RuleException.BusinessRuleException: Exception of type 'Domain.Core.RuleException.BusinessRuleException' was thrown.
   at BeerStore.Application.Modules.Auth.Role.Commands.UpdateRole.UpdateRoleCHandler.Handle(UpdateRoleCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Role\Commands\UpdateRole\UpdateRoleCHandler.cs:line 50
[2025-12-15 19:20:25.653 +07:00] [WRN] [ba0d12f3628ff69476b449a57adf5aac] [ExceptionMiddleware] [Business rule violation ("Conflict")]
Domain.Core.RuleException.BusinessRuleException: Exception of type 'Domain.Core.RuleException.BusinessRuleException' was thrown.
   at BeerStore.Application.Modules.Auth.Role.Commands.UpdateRole.UpdateRoleCHandler.Handle(UpdateRoleCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Role\Commands\UpdateRole\UpdateRoleCHandler.cs:line 50
   at BeerStore.Application.Modules.Auth.Role.Commands.UpdateRole.UpdateRoleCHandler.Handle(UpdateRoleCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Role\Commands\UpdateRole\UpdateRoleCHandler.cs:line 72
   at BeerStore.Api.Controllers.Auth.RoleController.Update(Guid id, RoleRequest request, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Api\Controllers\Auth\RoleController.cs:line 58
   at lambda_method95(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Api.Core.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Code\Project\Beer_Store\BE\Src\Shared\Api.Core\Middleware\ExceptionMiddleware.cs:line 35
[2025-12-15 19:20:25.704 +07:00] [INF] [ba0d12f3628ff69476b449a57adf5aac] [Diagnostics] [Request finished HTTP/1.1 PUT https://localhost:7124/api/Role/4eb4620a-8195-486b-b59d-c008fe5dada2 - 409 null application/problem+json 3475.2023ms]
[2025-12-15 19:22:40.500 +07:00] [INF] [8ffc37f691fc07a9c466f9b955292891] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/Permission - null null]
[2025-12-15 19:22:40.640 +07:00] [INF] [8ffc37f691fc07a9c466f9b955292891] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/Permission - 200 null application/json; charset=utf-8 139.6314ms]
[2025-12-15 19:26:53.981 +07:00] [INF] [953785e74f014e8f4b9184fd6900e94b] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/Permission - null null]
[2025-12-15 19:26:54.335 +07:00] [INF] [953785e74f014e8f4b9184fd6900e94b] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/Permission - 401 0 null 372.9214ms]
[2025-12-15 19:27:14.994 +07:00] [INF] [4503b5291161df6e09b16b9e1741c69f] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/Permission - null null]
[2025-12-15 19:27:18.521 +07:00] [INF] [4503b5291161df6e09b16b9e1741c69f] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/Permission - 200 null application/json; charset=utf-8 3527.8003ms]
[2025-12-15 19:28:53.065 +07:00] [INF] [8b888ea13f39f4a5382b394d3fc64fa3] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/Permission - application/json 97]
[2025-12-15 19:28:53.206 +07:00] [INF] [8b888ea13f39f4a5382b394d3fc64fa3] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/Permission - 200 null application/json; charset=utf-8 140.7638ms]
[2025-12-15 19:29:12.449 +07:00] [INF] [962ee46b7cd2a3957b31dd8816dc1301] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/Permission - application/json 97]
[2025-12-15 19:29:12.499 +07:00] [INF] [962ee46b7cd2a3957b31dd8816dc1301] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/Permission - 200 null application/json; charset=utf-8 49.3836ms]
[2025-12-15 19:29:16.438 +07:00] [INF] [d11530aec9176510f5108ee226a529c1] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/Permission - application/json 97]
[2025-12-15 19:29:16.451 +07:00] [INF] [d11530aec9176510f5108ee226a529c1] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/Permission - 200 null application/json; charset=utf-8 12.3111ms]
[2025-12-15 19:29:38.917 +07:00] [INF] [0d285fbc703586cd0c00fdd84af84eb5] [Diagnostics] [Request starting HTTP/1.1 POST https://localhost:7124/api/Permission - application/json 97]
[2025-12-15 19:29:39.588 +07:00] [INF] [0d285fbc703586cd0c00fdd84af84eb5] [Diagnostics] [Request finished HTTP/1.1 POST https://localhost:7124/api/Permission - 200 null application/json; charset=utf-8 671.7ms]
[2025-12-15 19:29:43.790 +07:00] [INF] [b108ee5fe3b57643c6bce0695d416768] [Diagnostics] [Request starting HTTP/1.1 POST https://localhost:7124/api/Permission - application/json 97]
[2025-12-15 19:29:43.857 +07:00] [WRN] [b108ee5fe3b57643c6bce0695d416768] [CreatePermissionCHandler] [Create failed: Permission with Name 'string' already exists]
[2025-12-15 19:29:43.956 +07:00] [WRN] [b108ee5fe3b57643c6bce0695d416768] [CreatePermissionCHandler] [BusinessRule Exception occurred while creating Permission. Request: {"PermissionName":"string","Module":"user","Operation":"read","Description":"string","$type":"PermissionRequest"}]
Domain.Core.RuleException.BusinessRuleException: Exception of type 'Domain.Core.RuleException.BusinessRuleException' was thrown.
   at BeerStore.Application.Modules.Auth.Permission.Commands.CreatePermission.CreatePermissionCHandler.Handle(CreatePermissionCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Permission\Commands\CreatePermission\CreatePermissionCHandler.cs:line 35
[2025-12-15 19:29:48.541 +07:00] [WRN] [b108ee5fe3b57643c6bce0695d416768] [ExceptionMiddleware] [Business rule violation ("Conflict")]
Domain.Core.RuleException.BusinessRuleException: Exception of type 'Domain.Core.RuleException.BusinessRuleException' was thrown.
   at BeerStore.Application.Modules.Auth.Permission.Commands.CreatePermission.CreatePermissionCHandler.Handle(CreatePermissionCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Permission\Commands\CreatePermission\CreatePermissionCHandler.cs:line 35
   at BeerStore.Application.Modules.Auth.Permission.Commands.CreatePermission.CreatePermissionCHandler.Handle(CreatePermissionCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Permission\Commands\CreatePermission\CreatePermissionCHandler.cs:line 54
   at BeerStore.Api.Controllers.Auth.PermissionController.Create(PermissionRequest request, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Api\Controllers\Auth\PermissionController.cs:line 58
   at lambda_method35(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Api.Core.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Code\Project\Beer_Store\BE\Src\Shared\Api.Core\Middleware\ExceptionMiddleware.cs:line 35
[2025-12-15 19:29:48.601 +07:00] [INF] [b108ee5fe3b57643c6bce0695d416768] [Diagnostics] [Request finished HTTP/1.1 POST https://localhost:7124/api/Permission - 409 null application/problem+json 4810.6353ms]
[2025-12-15 19:30:06.444 +07:00] [INF] [5920e800e80de32f9843a5e9883e2e26] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/Permission - null null]
[2025-12-15 19:30:06.468 +07:00] [INF] [5920e800e80de32f9843a5e9883e2e26] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/Permission - 200 null application/json; charset=utf-8 23.4462ms]
[2025-12-15 19:30:44.868 +07:00] [INF] [5d67ad5756b69d477413b8b750300aac] [Diagnostics] [Request starting HTTP/1.1 PUT https://localhost:7124/api/Permission/89cba5e4-0fbb-4621-ab2b-d14e2eba4c81 - application/json 97]
[2025-12-15 19:30:44.999 +07:00] [INF] [5d67ad5756b69d477413b8b750300aac] [Diagnostics] [Request finished HTTP/1.1 PUT https://localhost:7124/api/Permission/89cba5e4-0fbb-4621-ab2b-d14e2eba4c81 - 200 null application/json; charset=utf-8 131.3469ms]
[2025-12-15 19:30:50.682 +07:00] [INF] [f0f5ed36378241758b1c84e7f8be8380] [Diagnostics] [Request starting HTTP/1.1 PUT https://localhost:7124/api/Permission/89cba5e4-0fbb-4621-ab2b-d14e2eba4c81 - application/json 97]
[2025-12-15 19:30:50.716 +07:00] [INF] [f0f5ed36378241758b1c84e7f8be8380] [Diagnostics] [Request finished HTTP/1.1 PUT https://localhost:7124/api/Permission/89cba5e4-0fbb-4621-ab2b-d14e2eba4c81 - 200 null application/json; charset=utf-8 34.1659ms]
[2025-12-15 19:31:09.076 +07:00] [INF] [92ba4dc22f7f6fe70d0a838e505cc90b] [Diagnostics] [Request starting HTTP/1.1 PUT https://localhost:7124/api/Permission/89cba5e4-0fbb-4621-ab2b-d14e2eba4c81 - application/json 95]
[2025-12-15 19:31:09.104 +07:00] [INF] [92ba4dc22f7f6fe70d0a838e505cc90b] [Diagnostics] [Request finished HTTP/1.1 PUT https://localhost:7124/api/Permission/89cba5e4-0fbb-4621-ab2b-d14e2eba4c81 - 200 null application/json; charset=utf-8 27.8223ms]
[2025-12-15 19:31:19.874 +07:00] [INF] [1e55aaf63dc5697cc4d874184a11e657] [Diagnostics] [Request starting HTTP/1.1 POST https://localhost:7124/api/Permission - application/json 95]
[2025-12-15 19:31:19.897 +07:00] [INF] [1e55aaf63dc5697cc4d874184a11e657] [Diagnostics] [Request finished HTTP/1.1 POST https://localhost:7124/api/Permission - 200 null application/json; charset=utf-8 23.2261ms]
[2025-12-15 19:32:01.526 +07:00] [INF] [1c3003ab3fa37a0ccfff6546ae4c522b] [Diagnostics] [Request starting HTTP/1.1 PUT https://localhost:7124/api/Permission/89cba5e4-0fbb-4621-ab2b-d14e2eba4c81 - application/json 95]
[2025-12-15 19:32:01.557 +07:00] [WRN] [1c3003ab3fa37a0ccfff6546ae4c522b] [UpdatePermissionCHandler] [Update failed: Permission with Name 'test1' already exists]
[2025-12-15 19:32:01.615 +07:00] [WRN] [1c3003ab3fa37a0ccfff6546ae4c522b] [UpdatePermissionCHandler] [BusinessRule Exception occurred while updating Permission. Request: {"PermissionName":"test1","Module":"user","Operation":"read","Description":"test2","$type":"PermissionRequest"}]
Domain.Core.RuleException.BusinessRuleException: Exception of type 'Domain.Core.RuleException.BusinessRuleException' was thrown.
   at BeerStore.Application.Modules.Auth.Permission.Commands.UpdatePermission.UpdatePermissionCHandler.Handle(UpdatePermissionCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Permission\Commands\UpdatePermission\UpdatePermissionCHandler.cs:line 50
[2025-12-15 19:32:03.804 +07:00] [WRN] [1c3003ab3fa37a0ccfff6546ae4c522b] [ExceptionMiddleware] [Business rule violation ("Conflict")]
Domain.Core.RuleException.BusinessRuleException: Exception of type 'Domain.Core.RuleException.BusinessRuleException' was thrown.
   at BeerStore.Application.Modules.Auth.Permission.Commands.UpdatePermission.UpdatePermissionCHandler.Handle(UpdatePermissionCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Permission\Commands\UpdatePermission\UpdatePermissionCHandler.cs:line 50
   at BeerStore.Application.Modules.Auth.Permission.Commands.UpdatePermission.UpdatePermissionCHandler.Handle(UpdatePermissionCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Permission\Commands\UpdatePermission\UpdatePermissionCHandler.cs:line 72
   at BeerStore.Api.Controllers.Auth.PermissionController.Update(Guid id, PermissionRequest request, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Api\Controllers\Auth\PermissionController.cs:line 67
   at lambda_method155(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Api.Core.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Code\Project\Beer_Store\BE\Src\Shared\Api.Core\Middleware\ExceptionMiddleware.cs:line 35
[2025-12-15 19:32:03.823 +07:00] [INF] [1c3003ab3fa37a0ccfff6546ae4c522b] [Diagnostics] [Request finished HTTP/1.1 PUT https://localhost:7124/api/Permission/89cba5e4-0fbb-4621-ab2b-d14e2eba4c81 - 409 null application/problem+json 2297.0253ms]
[2025-12-15 19:32:24.845 +07:00] [INF] [6254424d9f05723e820ec24f3e5ae966] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/Permission - null null]
[2025-12-15 19:32:24.858 +07:00] [INF] [6254424d9f05723e820ec24f3e5ae966] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/Permission - 200 null application/json; charset=utf-8 13.5963ms]
[2025-12-15 19:32:45.341 +07:00] [INF] [cadf043707053b9e6cd73f66cc0a5371] [Diagnostics] [Request starting HTTP/1.1 DELETE https://localhost:7124/api/Permission/89cba5e4-0fbb-4621-ab2b-d14e2eba4c81 - null null]
[2025-12-15 19:32:45.417 +07:00] [INF] [cadf043707053b9e6cd73f66cc0a5371] [Diagnostics] [Request finished HTTP/1.1 DELETE https://localhost:7124/api/Permission/89cba5e4-0fbb-4621-ab2b-d14e2eba4c81 - 204 null null 76.5603ms]
[2025-12-15 19:32:52.822 +07:00] [INF] [e6a1464bc5b478eebb36e4c0d62bdfbd] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/Permission - null null]
[2025-12-15 19:32:52.834 +07:00] [INF] [e6a1464bc5b478eebb36e4c0d62bdfbd] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/Permission - 200 null application/json; charset=utf-8 12.1318ms]
[2025-12-15 19:33:44.109 +07:00] [INF] [80a10426b9506cb4f7f4893ee0ab622a] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/Permission/module/1 - null null]
[2025-12-15 19:33:44.174 +07:00] [INF] [80a10426b9506cb4f7f4893ee0ab622a] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/Permission/module/1 - 200 null application/json; charset=utf-8 64.8974ms]
[2025-12-15 19:36:14.198 +07:00] [INF] [2be42f71293443eb7b5d22acd05a7d60] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/Permission/module/user - null null]
[2025-12-15 19:36:14.221 +07:00] [INF] [2be42f71293443eb7b5d22acd05a7d60] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/Permission/module/user - 200 null application/json; charset=utf-8 22.6577ms]
[2025-12-15 19:43:20.608 +07:00] [INF] [f546c44f2bd9f12eb3a7049bdbf1f279] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/Permission/module/user - null null]
[2025-12-15 19:43:24.098 +07:00] [INF] [f546c44f2bd9f12eb3a7049bdbf1f279] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/Permission/module/user - 200 null application/json; charset=utf-8 3509.4217ms]
[2025-12-15 19:43:33.525 +07:00] [INF] [4a5c2a2d113f64f6745e2045320c2c4d] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/Role - null null]
[2025-12-15 19:43:33.559 +07:00] [INF] [4a5c2a2d113f64f6745e2045320c2c4d] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/Role - 401 0 null 35.0461ms]
[2025-12-15 19:43:43.409 +07:00] [INF] [73a8e16aef1f0d157d8c2af7c9b09c20] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/Role - null null]
[2025-12-15 19:43:43.574 +07:00] [INF] [73a8e16aef1f0d157d8c2af7c9b09c20] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/Role - 200 null application/json; charset=utf-8 165.1321ms]
[2025-12-15 19:43:54.293 +07:00] [INF] [6073755912f4f1b3e54b5fb56f50bdcd] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/User - null null]
[2025-12-15 19:43:54.384 +07:00] [INF] [6073755912f4f1b3e54b5fb56f50bdcd] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/User - 200 null application/json; charset=utf-8 90.9724ms]
[2025-12-15 19:50:36.616 +07:00] [INF] [4ab64486e93a13396b5bed28198d6e70] [Diagnostics] [Request starting HTTP/1.1 GET https://localhost:7124/api/Permission - null null]
[2025-12-15 19:50:40.361 +07:00] [INF] [4ab64486e93a13396b5bed28198d6e70] [Diagnostics] [Request finished HTTP/1.1 GET https://localhost:7124/api/Permission - 200 null application/json; charset=utf-8 3765.4829ms]
[2025-12-15 19:50:51.065 +07:00] [INF] [b3e82c9ecdae0095973749b317e01976] [Diagnostics] [Request starting HTTP/1.1 PUT https://localhost:7124/api/Permission/89cba5e4-0fbb-4621-ab2b-d14e2eba4c81 - application/json 95]
[2025-12-15 19:50:51.533 +07:00] [WRN] [b3e82c9ecdae0095973749b317e01976] [UpdatePermissionCHandler] [Update failed: Permission with Id="89cba5e4-0fbb-4621-ab2b-d14e2eba4c81" not found]
[2025-12-15 19:50:51.663 +07:00] [WRN] [b3e82c9ecdae0095973749b317e01976] [UpdatePermissionCHandler] [BusinessRule Exception occurred while updating Permission. Request: {"PermissionName":"test1","Module":"user","Operation":"read","Description":"test2","$type":"PermissionRequest"}]
Domain.Core.RuleException.BusinessRuleException: Exception of type 'Domain.Core.RuleException.BusinessRuleException' was thrown.
   at BeerStore.Application.Modules.Auth.Permission.Commands.UpdatePermission.UpdatePermissionCHandler.Handle(UpdatePermissionCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Permission\Commands\UpdatePermission\UpdatePermissionCHandler.cs:line 35
[2025-12-15 19:50:54.376 +07:00] [WRN] [b3e82c9ecdae0095973749b317e01976] [ExceptionMiddleware] [Business rule violation ("NotFound")]
Domain.Core.RuleException.BusinessRuleException: Exception of type 'Domain.Core.RuleException.BusinessRuleException' was thrown.
   at BeerStore.Application.Modules.Auth.Permission.Commands.UpdatePermission.UpdatePermissionCHandler.Handle(UpdatePermissionCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Permission\Commands\UpdatePermission\UpdatePermissionCHandler.cs:line 35
   at BeerStore.Application.Modules.Auth.Permission.Commands.UpdatePermission.UpdatePermissionCHandler.Handle(UpdatePermissionCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Permission\Commands\UpdatePermission\UpdatePermissionCHandler.cs:line 72
   at BeerStore.Api.Controllers.Auth.PermissionController.Update(Guid id, PermissionRequest request, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Api\Controllers\Auth\PermissionController.cs:line 67
   at lambda_method35(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Api.Core.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Code\Project\Beer_Store\BE\Src\Shared\Api.Core\Middleware\ExceptionMiddleware.cs:line 25
[2025-12-15 19:50:54.453 +07:00] [INF] [b3e82c9ecdae0095973749b317e01976] [Diagnostics] [Request finished HTTP/1.1 PUT https://localhost:7124/api/Permission/89cba5e4-0fbb-4621-ab2b-d14e2eba4c81 - 404 null application/problem+json 3389.3586ms]
[2025-12-15 19:56:09.343 +07:00] [INF] [fb2b289d87b4bbb034136dc6646e4e54] [Diagnostics] [Request starting HTTP/1.1 POST https://localhost:7124/api/Role - application/json 54]
[2025-12-15 19:56:09.877 +07:00] [INF] [fb2b289d87b4bbb034136dc6646e4e54] [Diagnostics] [Request finished HTTP/1.1 POST https://localhost:7124/api/Role - 401 0 null 554.2727ms]
[2025-12-15 19:56:25.566 +07:00] [INF] [c98fb37b5ec50d038d0792d930277812] [Diagnostics] [Request starting HTTP/1.1 POST https://localhost:7124/api/Role - application/json 54]
[2025-12-15 19:56:28.430 +07:00] [ERR] [c98fb37b5ec50d038d0792d930277812] [Command] [Failed executing DbCommand (109ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTimeOffset), @p2='?' (DbType = Guid), @p3='?' (Size = 255), @p4='?' (Size = 69), @p5='?' (DbType = DateTimeOffset), @p6='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Roles] ([IdRole], [CreatedAt], [CreatedBy], [Description], [RoleName], [UpdatedAt], [UpdatedBy])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);]
[2025-12-15 19:56:28.513 +07:00] [ERR] [c98fb37b5ec50d038d0792d930277812] [Update] [An exception occurred in the database while saving changes for context type 'BeerStore.Infrastructure.Persistence.Db.AuthDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Roles' with unique index 'RoleName_Unique'. The duplicate key value is (test1).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:2927f8bb-7ca8-4b4d-8a80-1b52d930cf05
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)]
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Roles' with unique index 'RoleName_Unique'. The duplicate key value is (test1).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:2927f8bb-7ca8-4b4d-8a80-1b52d930cf05
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2025-12-15 19:56:29.006 +07:00] [ERR] [c98fb37b5ec50d038d0792d930277812] [CreateRoleCHandler] [Exception occurred while creating Role. Request: {"RoleName":"test1","Description":"test2","$type":"RoleRequest"}]
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Roles' with unique index 'RoleName_Unique'. The duplicate key value is (test1).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:2927f8bb-7ca8-4b4d-8a80-1b52d930cf05
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 31
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 40
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 49
   at BeerStore.Application.Modules.Auth.Role.Commands.CreateRole.CreateRoleCHandler.Handle(CreateRoleCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Role\Commands\CreateRole\CreateRoleCHandler.cs:line 45
[2025-12-15 19:56:32.251 +07:00] [ERR] [c98fb37b5ec50d038d0792d930277812] [ExceptionMiddleware] [Unhandled exception]
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Roles' with unique index 'RoleName_Unique'. The duplicate key value is (test1).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:2927f8bb-7ca8-4b4d-8a80-1b52d930cf05
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 31
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 40
   at Infrastructure.Core.UnitOfWork.UnitOfWorkGeneric.CommitTransactionAsync(CancellationToken cancellationToken) in C:\Code\Project\Beer_Store\BE\Src\Shared\Infrastructure.Core\UnitOfWork\UnitOfWorkGeneric.cs:line 49
   at BeerStore.Application.Modules.Auth.Role.Commands.CreateRole.CreateRoleCHandler.Handle(CreateRoleCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Role\Commands\CreateRole\CreateRoleCHandler.cs:line 45
   at BeerStore.Application.Modules.Auth.Role.Commands.CreateRole.CreateRoleCHandler.Handle(CreateRoleCommand command, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Application\Modules\Auth\Role\Commands\CreateRole\CreateRoleCHandler.cs:line 65
   at BeerStore.Api.Controllers.Auth.RoleController.Create(RoleRequest request, CancellationToken token) in C:\Code\Project\Beer_Store\BE\Src\Core\BeerStore.Api\Controllers\Auth\RoleController.cs:line 47
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Api.Core.Middleware.ExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Code\Project\Beer_Store\BE\Src\Shared\Api.Core\Middleware\ExceptionMiddleware.cs:line 25
[2025-12-15 19:56:32.333 +07:00] [INF] [c98fb37b5ec50d038d0792d930277812] [Diagnostics] [Request finished HTTP/1.1 POST https://localhost:7124/api/Role - 500 null application/problem+json 6768.3737ms]
